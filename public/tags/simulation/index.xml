<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Simulation on NEUQ 龙芯实验室博客</title><link>https://loongson-neuq.pages.dev/tags/simulation/</link><description>Recent content in Simulation on NEUQ 龙芯实验室博客</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Wed, 30 Oct 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://loongson-neuq.pages.dev/tags/simulation/index.xml" rel="self" type="application/rss+xml"/><item><title>Vivado仿真的常见ERROR</title><link>https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/</link><pubDate>Wed, 30 Oct 2024 00:00:00 +0000</pubDate><guid>https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/</guid><description>&lt;h2 id="概述">概述
&lt;/h2>&lt;p>&lt;strong>首先! 检查你的保留字拼写, 变量名拼写, 模块名拼写&amp;hellip;&amp;hellip; 正不正确!!!&lt;/strong>&lt;/p>
&lt;p>&lt;strong>然后遵循 &amp;ldquo;时间上先定错，空间上再定错&amp;rdquo;&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>时间上先定错：&lt;/strong> 在出错的大片时间段里，定位出源头部分，源头部分是一个较小的时间段。&lt;/li>
&lt;li>&lt;strong>空间上再定错：&lt;/strong> 在源头时间段里，查看设计电路的控制部分和数据通路，定位是哪个信号带来的错误，或者是哪几个信号的组合带来的错误，或者是设计上哪里有疏忽带来的错误。&lt;/li>
&lt;/ul>
&lt;h2 id="spawn-failedno-error">Spawn failed：No error
&lt;/h2>&lt;p>&lt;img src="https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/spawnFail.jpeg"
width="1232"
height="238"
srcset="https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/spawnFail_hu88ab62315fd6b1d909cf31c3c27ee651_59070_480x0_resize_q75_box.jpeg 480w, https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/spawnFail_hu88ab62315fd6b1d909cf31c3c27ee651_59070_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
alt="spawnFailed"
class="gallery-image"
data-flex-grow="517"
data-flex-basis="1242px"
>&lt;/p>
&lt;p>如无其他ERROR则无需关心, 这是vivado的一个bug, 无法解决。&lt;/p>
&lt;h2 id="earlier-errors">earlier errors
&lt;/h2>&lt;p>&lt;img src="https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/earlierError.jpg"
width="1660"
height="935"
srcset="https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/earlierError_hu56d2483763bc4a246f848f79bb73657d_151244_480x0_resize_q75_box.jpg 480w, https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/earlierError_hu56d2483763bc4a246f848f79bb73657d_151244_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="earlierErrors"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>一般由于打开仿真后修改后源代码, 直接重新仿真时会出现, 将仿真窗口关闭, 重新打开即可。&lt;/p>
&lt;h2 id="进程无法访问">进程无法访问
&lt;/h2>&lt;p>&lt;img src="https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/fileUsing.jpg"
width="958"
height="339"
srcset="https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/fileUsing_hud154fbf75dc835e55763b4b393519220_33729_480x0_resize_q75_box.jpg 480w, https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/fileUsing_hud154fbf75dc835e55763b4b393519220_33729_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="fileUsing"
class="gallery-image"
data-flex-grow="282"
data-flex-basis="678px"
>&lt;/p>
&lt;p>关闭代码编辑器和仿真窗口, 重新打开即可。&lt;/p>
&lt;h2 id="信号为z">信号为&amp;rsquo;Z'
&lt;/h2>&lt;p>&lt;img src="https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/Z.jpg"
width="1595"
height="548"
srcset="https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/Z_hu3e84128d86145d7ae29c71ea259180dc_80653_480x0_resize_q75_box.jpg 480w, https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/Z_hu3e84128d86145d7ae29c71ea259180dc_80653_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="signalZ"
class="gallery-image"
data-flex-grow="291"
data-flex-basis="698px"
>&lt;/p>
&lt;p>一般是由于信号未连接导致, 请检查代码是否有拼写错误。&lt;/p>
&lt;h2 id="信号为x">信号为&amp;rsquo;X'
&lt;/h2>&lt;p>常见于信号未赋值, 多驱动和寄存器未初始化, 修改代码即可。&lt;/p>
&lt;ul>
&lt;li>如果因子信号都没有为X的，则很可能是多驱动导致的，则综合排查Error和Critical warning。&lt;/li>
&lt;/ul>
&lt;h2 id="仿真波形停止-iteration-limit-10000-is-reached">仿真波形停止 &amp;lsquo;Iteration limit 10000 is reached.&amp;rsquo;
&lt;/h2>&lt;p>&lt;img src="https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/combloop.jpg"
width="1272"
height="495"
srcset="https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/combloop_huffe1e99755e04a182ea56bce120f3519_54035_480x0_resize_q75_box.jpg 480w, https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/combloop_huffe1e99755e04a182ea56bce120f3519_54035_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="combloop"
class="gallery-image"
data-flex-grow="256"
data-flex-basis="616px"
>&lt;/p>
&lt;p>一般是由于组合逻辑环路导致, 可以先综合, 查看产生的Error和Critical warning，并尝试修正。&lt;/p>
&lt;h2 id="越沿采样">越沿采样
&lt;/h2>&lt;p>&lt;img src="https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/over.jpg"
width="1288"
height="465"
srcset="https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/over_hufb8b5f2b7bdbdd951e99540d38ad94f1_41676_480x0_resize_q75_box.jpg 480w, https://loongson-neuq.pages.dev/p/vivado%E4%BB%BF%E7%9C%9F%E7%9A%84%E5%B8%B8%E8%A7%81error/assets/over_hufb8b5f2b7bdbdd951e99540d38ad94f1_41676_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="over"
class="gallery-image"
data-flex-grow="276"
data-flex-basis="664px"
>&lt;/p>
&lt;p>上图示例中在105ns时刻，clk上升沿到来，a_r和a_r_r同时变为了 1（也就是a的值）。a_r在105时刻前是0，在 105时刻后是 1。从源码来看，a_r_r是在上升沿采样a_r的值，结果其在 105时刻采样到 a_r为1的值，也就是采样到了a_r在同一上升沿后的值。这就属于越沿采样。&lt;/p>
&lt;p>一般因为阻塞赋值 “=” 和非阻塞赋值 “&amp;lt;=” 混用。&lt;/p>
&lt;h2 id="其他怪异的error">其他怪异的ERROR
&lt;/h2>&lt;p>当出现波形怪异类的错时，需要区分其是仿真工具出错还是RTL代码出错：&lt;/p>
&lt;ol>
&lt;li>观察出错的信号，看其生成因子，如果自我判断 RTL 应该没有，且波形显示确实太怪异（比如始终为32’hxx?x0x?），则很有可能仿真工具出错。重启电脑甚至重建工程试试。&lt;/li>
&lt;li>实在无法从波形里区分出是什么错。可以尝试先运行综合，看出综合后的 Error、Critical warning 和 warning。其中Error是必须要修正的，Critical warning是强烈建议要修正的，warning是建议能修则修的。&lt;/li>
&lt;li>经常有些不符合规范的代码，Vivado也不会报出 Warning，需要大家仔细复核自己的代码。常见的隐蔽错误有：对input信号进行了赋值，模块调用信号连接错误，reset信号接成了clock信号，等等。&lt;/li>
&lt;/ol></description></item></channel></rss>